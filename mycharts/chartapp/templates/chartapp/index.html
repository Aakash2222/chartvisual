{% extends "partials/base.html" %}
{% block content %}

<div class="main-container">

<div><h1>Django Chart Project</h1></div>
<hr>
    
<div class="row"> 
  <div class="col-md-4">
    <div class="card">
      <div class="card-body">
        
        <h5 class="card-title">Sales Overview</h5>

        <div class="chart-container">
          {% include 'partials/chart1.html' %}
        </div>
        <p class="card-text">View your sales performance over time.</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">User Statistics</h5>
        <div class="chart-container">
          somethings
          {% include 'partials/chart2.html' %}
        </div>
        {% comment %} <p class="card-text">Analyze user behavior and engagement.</p> {% endcomment %}
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Product Performance</h5>
        <div class="chart-container">
          <!-- Your product performance chart goes here -->
        </div>
        {% comment %} <p class="card-text">Track the performance of your products.</p> {% endcomment %}
      </div>
    </div>
  </div>
</div>
<br><br>
<hr>
  </div>

  <hr>
  <div class="row px-2">
      
    <div class="col-md-4 border px-2">
      <h3>Add new data to chart</h3><hr>
      <form action="" method="POST">
        {% csrf_token %}
        {{form}}
        <br>
        <input class="btn btn-outline-success center" type="submit" value="Add Data">
      </form>
    </div>

    <div class="col-md-4 border px-2">
      
    </div>
    
    <div class="col-md-4 border" style="">
      <div>
          <canvas id="myChart"></canvas>
      </div>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
          const ctx = document.getElementById('myChart');
          new Chart(ctx, {
            type: 'pie',
            data: {
              labels: [{% for product in products %} '{{product.topic}}',  {% endfor %}],
              datasets: [{
                label: '# of Products',
                data: [{% for product in products %} '{{product.likelihood}}',  {% endfor %}],
                backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(255, 159, 64, 0.2)',
                  'rgba(255, 205, 86, 0.2)',
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(153, 102, 255, 0.2)',
                ],
                borderColor: [
                  'rgb(255, 99, 132)',
                  'rgb(255, 159, 64)',
                  'rgb(255, 205, 86)',
                  'rgb(75, 192, 192)',
                  'rgb(54, 162, 235)',
                  'rgb(153, 102, 255)',
                ],
                borderWidth: 1
              }]
            },
            options: {
              scales: {
                y: {
                  beginAtZero: true
                }
              }
            }
          });
        </script>  
        <h3>BarChar: Topic-Likelihood : BarChart</h3>

    </div>
  </div>
{% endblock %}

