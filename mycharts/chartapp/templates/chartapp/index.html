{% extends "partials/base.html" %}
{% block content %}

<div class="main-container">

<div><h1>Django Chart Project</h1></div>
<hr>
    <div class="row">
      
      <div class="col-md-4">
        <h3>Add new data to chart</h3><hr>
        <form action="" method="POST">
          
          {% csrf_token %}
          {{form}}
          <br>
          <input class="btn btn-outline-success center" type="submit" value="Add Data">
        </form>
        
      </div>
      <div class="col-md-4">
        <h3>Total Product list</h3>
        <ul>
          {% for product in products %}
          <li>{{product.category}}</li>
          {% endfor %}
        </ul>
      </div>
      
      <div class="col-md-4">
        <div>
            <canvas id="myChart"></canvas>
        </div>
          <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
          
          <script>
            const ctx = document.getElementById('myChart');
          
            new Chart(ctx, {
              type: 'bar',
              data: {
                {% comment %} labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'], {% endcomment %}
                labels: [{% for product in products %} '{{product.category}}',  {% endfor %}],
                datasets: [{
                  label: '# of Products',
                  {% comment %} data: [12, 18, 3, 5, 2, 3], {% endcomment %}
                  data: [{% for product in products %} '{{product.num_of_products}}',  {% endfor %}],
                  backgroundColor: [

                    'rgba(255, 99, 132, 0.2)',
                    'rgba(255, 159, 64, 0.2)',
                    'rgba(255, 205, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    {% comment %} 'rgba(201, 203, 207, 0.2)' {% endcomment %}
                  ],
                  borderColor: [
                    'rgb(255, 99, 132)',
                    'rgb(255, 159, 64)',
                    'rgb(255, 205, 86)',
                    'rgb(75, 192, 192)',
                    'rgb(54, 162, 235)',
                    'rgb(153, 102, 255)',
                    {% comment %} 'rgb(201, 203, 207)' {% endcomment %}
                  ],
                  borderWidth: 1
                }]
              },
              options: {
                scales: {
                  y: {
                    beginAtZero: true
                  }
                }
              }
            });
          </script>
              
      </div>
    </div>
  </div>
{% endblock %}

